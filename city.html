<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cyberpunk Şehir - Detaylı Sahne</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      /* Siyah %65, mor %35 degrade */
      background: linear-gradient(180deg, #000011 0%, #000011 65%, #220044 100%);
      overflow: hidden;
      cursor: none;
    }
    nav { /* Yönetim menüsü */ }
    #stars, #cursor-light { /* index.html ile uyumlu */ }
    #city {
      position: relative;
      width: 100vw;
      height: 100vh;
      z-index: 1;
    }
    .building {
      position: absolute;
      bottom: 0;
      width: 80px;
      background: linear-gradient(180deg, #2a002e, #0a0008);
      border: 2px solid #7a3cff;
      border-radius: 4px 4px 0 0;
      box-shadow: 0 0 12px #bb88ff99;
    }
    .window-row { display: flex; justify-content: space-around; margin-top: 6px; }
    .window {
      width: 10px;
      height: 14px;
      border-radius: 2px;
      background: #150010;
      box-shadow: 0 0 2px #000;
      transition: background 0.5s, box-shadow 0.5s;
    }
    /* Farklı ışık renkleri */
    .window.green { background: #a0ff8c; box-shadow: 0 0 6px #a0ff8c88; }
    .window.blue { background: #8cdaff; box-shadow: 0 0 6px #8cdaff88; }
    .window.pink { background: #ff8cda; box-shadow: 0 0 6px #ff8cda88; }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Ana Sayfa</a>
    <a href="city.html">Şehir</a>
    <a href="ships.html">Gemi</a>
  </nav>
  <canvas id="stars"></canvas>
  <div id="cursor-light"></div>
  <div id="city"></div>

  <script>
    // Ortak index.js'den yıldız ve imleç efektini çekebiliriz veya yeniden tanımlayalım
    // Stars
    const starCanvas = document.getElementById('stars');
    const starCtx = starCanvas.getContext('2d');
    let sw, sh, stars = [];
    function initStars(){ sw = window.innerWidth; sh = window.innerHeight; starCanvas.width = sw; starCanvas.height = sh; stars = []; for(let i=0; i<200; i++){ stars.push({ x:Math.random()*sw, y:Math.random()*sh, r:Math.random()*1.5, a:Math.random(), d:0.003+Math.random()*0.02 }); } }
    function drawStars(){ starCtx.clearRect(0,0,sw,sh); stars.forEach(s=>{ s.a+=s.d; if(s.a<=0||s.a>=1) s.d*=-1; starCtx.beginPath(); starCtx.arc(s.x,s.y,s.r,0,2*Math.PI); starCtx.fillStyle=`rgba(245,230,204,${s.a})`; starCtx.fill(); }); requestAnimationFrame(drawStars); }
    initStars(); drawStars(); window.addEventListener('resize', initStars);
    // Cursor
    const cursor = document.getElementById('cursor-light');
    function moveCursor(x,y){ cursor.style.left = x+'px'; cursor.style.top = y+'px'; }
    window.addEventListener('mousemove',e=>moveCursor(e.clientX,e.clientY));
    window.addEventListener('touchmove',e=>{ let t=e.touches[0]; moveCursor(t.clientX,t.clientY);} ,{passive:true});

    // City buildings
    const city = document.getElementById('city');
    const count = Math.ceil(window.innerWidth/100);
    for(let i=0;i<count;i++){
      // Bina element
      const b = document.createElement('div'); b.classList.add('building');
      const bx = i*100 + (Math.random()*40-20);
      const bh = 120 + Math.random()*(window.innerHeight*0.5);
      b.style.left=bx+'px'; b.style.height=bh+'px';
      // Pencere satırları
      const cols=5, rows=Math.floor(bh/30);
      for(let r=0;r<rows;r++){
        const row=document.createElement('div'); row.classList.add('window-row');
        for(let c=0;c<cols;c++){
          const w=document.createElement('div'); w.classList.add('window');
          // Başlangıç durumu
          const rand=Math.random();
          if(rand<0.25) w.classList.add('green');
          else if(rand<0.5) w.classList.add('blue');
          else if(rand<0.75) w.classList.add('pink');
          // 25% ihtimalle kapalı kalır (sınıf yok)
          row.appendChild(w);
        }
        b.appendChild(row);
      }
      city.appendChild(b);
    }
    // Rastgele yanıp sönme
    setInterval(()=>{
      const windows = document.querySelectorAll('.building .window');
      if(!windows.length) return;
      const w = windows[Math.floor(Math.random()*windows.length)];
      // Mevcut renkten toggle
      if(w.classList.contains('green')||w.classList.contains('blue')||w.classList.contains('pink')){
        // kapat
        w.dataset.prev = w.classList.value;
        w.className='window';
      } else {
        // rastgele renk ata
        const choice=['green','blue','pink'][Math.floor(Math.random()*3)];
        w.className=`window ${choice}`;
      }
    },150);

    window.addEventListener('resize',()=>location.reload());
  </script>
</body>
</html>
